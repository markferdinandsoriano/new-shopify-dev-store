{% liquid
  assign menu_link_lists = linklists['main-menu'].links
%}

{% capture custom_menu_categories %}
{% for block in section.blocks %}
  {% case block.type %}
    {% when 'heading' %}
      {% render 'navigation-custom-menu-blocks',block: block,link_level_container_selector:block.settings.menu_level %}
  {% endcase %}
{% endfor %}
{% endcapture %}

{% capture custom_images %}
{% for block in section.blocks %}
  {% case block.type %}
    {% when 'Image' %}
      {% render 'navigation-image-menu-blocks',block: block,link_level_container_selector:'custom_images_container' %}  
  {% endcase %}
{% endfor %}
{% endcapture %}

<div class="w-full h-auto">
  {% render 'navigation-menu-large-screen',
    custom_menu_categories: custom_menu_categories,
    custom_images: custom_images,
    menu_link_lists: menu_link_lists
  %}

  {% render 'navigation-menu-mobile-screen',
    custom_menu_categories: custom_menu_categories,
    custom_images: custom_images,
    menu_link_lists: menu_link_lists
  %}
</div>

{% schema %}
{
  "name": "navigation-menu",
  "class": "navigation-menu-section",
  "blocks": [
    {
      "type": "heading",
      "name": "Custom menu",
      "settings": [
        {
          "type": "text",
          "id": "heading",
          "label": "Heading"
        },
        {
          "type": "text",
          "id": "parent_link",
          "label": "Root Level Link"
        },
        {
          "type": "select",
          "id": "menu_level",
          "label": "Select Link Level",
          "options": [
            {
              "value": "root-level",
              "label": "Root level"
            },
            {
              "value": "level-1",
              "label": "Level 1"
            },
            {
              "value": "level-2",
              "label": "Level 2"
            }
          ]
        },
        {
          "type": "link_list",
          "id": "custom_menu",
          "label": "Special Categories menu"
        }
      ]
    },
    {
      "type": "Image",
      "name": "Image menu",
      "settings": [
        {
          "type": "image_picker",
          "id": "image_value",
          "label": "Menu Image"
        },
        {
          "type": "text",
          "id": "image_parent_link",
          "label": "Root Level Link"
        }
      ]
    }
  ]
}
{% endschema %}
